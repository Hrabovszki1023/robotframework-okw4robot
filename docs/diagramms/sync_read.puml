@startuml SyncRead
title OKW Sync-Strategie (Read: Verify*/Memorize*/Log*)

actor Test
participant "Keywords\n(Verify*/Memorize/Log)" as KW
participant "OkwWidget\n(WebSe_Base._wait_before 'read')" as W
participant "Adapter\n(SeleniumWebAdapter)" as AD
participant "Browser/DOM" as DOM

Test -> KW: VerifyValue/Verify... (Name, expected)
KW -> W: resolve_widget(name)
KW -> W: _wait_before('read')
...
W -> AD: element_exists(locator)
AD -> DOM: query element
AD --> W: True/False
opt visible (if configured)
  W -> AD: wait_until_visible(locator, timeout)
end

== value wait loop ==
loop until verify-timeout
  KW -> W: widget.okw_get_value/okw_get_text/okw_get_attribute/...
  W -> AD: get_value/get_text/get_attribute/...
  AD --> W: actual
  alt matches expected (Exact/WCM/REGX)
    KW --> Test: pass
    break
  end
end
alt timeout
  KW --> Test: fail with last seen value
end

note right of KW
Verify-Timeouts:
- ${OKW_TIMEOUT_VERIFY_VALUE}
- ${OKW_TIMEOUT_VERIFY_PLACEHOLDER}
- ${OKW_TIMEOUT_VERIFY_TOOLTIP}
- ${OKW_TIMEOUT_VERIFY_LABEL}
- ${OKW_TIMEOUT_VERIFY_CAPTION}
- ${OKW_TIMEOUT_VERIFY_ATTRIBUTE}
Instance (YAML): wait.read {...}
end note

@enduml
