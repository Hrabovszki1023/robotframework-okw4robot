@startuml AdaptersOverview
title OKW4Robot â€“ Architektur-Uebersicht (Delegation statt Steuerung)

package "okw4robot.runtime" {
  class Context {
    +set_adapter(adapter)
    +get_adapter()
    +set_app(name, model)
    +set_window(name)
  }
}

package "okw4robot.keywords" {
  class HostKeywords {
    +Start Host(name)
    +Select Host(name)
    +Stop Host()
  }
  class AppKeywords {
    +Start App(name)
    +Select Window(name)
    +Stop App()
  }
  class WidgetKeywords {
    +ClickOn(name)
    +SetValue(name, value)
    +Select(name, value)
    +TypeKey(name, key)
    +VerifyValue(name, expected)
    ..
    - resolve_widget(name)
  }
}

package "okw4robot.widgets" {
  class OkwWidget {
    +adapter
    +locator
    +options
    .. okw_* Schnittstelle ..
    +okw_click()
    +okw_set_value(value)
    +okw_get_value()
    +okw_select(value)
    +okw_type_key(key)
    +okw_get_text()
    +okw_get_label()
    +okw_get_tooltip()
    +okw_get_placeholder()
    +okw_get_attribute(name)
    +okw_exists()
    +okw_is_visible()
    +okw_is_enabled()
    ..
  }
}

package "okw_web_selenium" {
  class SeleniumWebAdapter {
    +browser
    +sl: SeleniumLibrary
    +click(locator)
    +get_value(locator)
    ..
  }
  class WebSe_Base {
    +sl: SeleniumLibrary
    # _wait_before(intent)
    # _resolve()
  }
  class WebSe_TextField
  class WebSe_Button
  class WebSe_ComboBox
  class "WebSe_*" as WebSeOther
}

package "okw_java_swing" {
  class JavaRpcAdapter {
    +_rpc_call(method, params)
  }
  class "JavaSw_*" as JavaSwOther
}

HostKeywords --> Context : set_adapter(adapter)
HostKeywords ..> "YAML (Host)\nChrome.yaml" : laedt Adapterklasse
AppKeywords --> Context : set_app(name, model)
WidgetKeywords ..> Context : resolve via get_adapter()
WidgetKeywords --> OkwWidget : widget.okw_*(...)

OkwWidget <|-- WebSe_Base
WebSe_Base <|-- WebSe_TextField
WebSe_Base <|-- WebSe_Button
WebSe_Base <|-- WebSe_ComboBox
WebSe_Base <|-- WebSeOther
WebSe_Base *--> SeleniumWebAdapter : adapter

OkwWidget <|-- JavaSwOther

note right of WidgetKeywords
resolve_widget(name):
- laedt Widgetklasse aus App-YAML
- holt Adapter aus Context
- instanziert Widget(adapter, locator, **extras)
end note

note bottom of OkwWidget
OkwWidget definiert die Schnittstelle.
Nicht implementierte Methoden werfen
NotImplementedError.
Treiber-Pakete (okw_web_selenium, okw_java_swing)
erben und implementieren die Methoden.
end note

note right of WebSe_Base
Delegation: Keywords rufen widget.okw_*()
auf. Das Widget entscheidet intern,
wie die Aktion treiberspezifisch
(z.B. via SeleniumLibrary) umgesetzt wird.
end note

@enduml
